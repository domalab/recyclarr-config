# Media Naming Configuration
media_naming:
  series: default
  season: default
  episodes:
    rename: true

# Quality definitions from the guide to sync to Sonarr. Choices: series, anime
quality_definition:
  type: series

quality_profiles:
  - name: AppleTV-Optimized
    reset_unmatched_scores:
      enabled: true
    upgrade:
      allowed: true
      until_quality: Bluray-2160p
    min_format_score: 0
    score_set: sqp-1-2160p
    qualities:
      - name: Bluray-2160p
        enabled: true
      - name: Web 2160p
        qualities:
          - WEBRip-2160p
          - WEBDL-2160p
      - name: Bluray-1080p Remux
        enabled: true
      - name: Bluray-1080p
        enabled: true
      - name: Web 1080p
        enabled: true
        qualities:
          - WEBRip-1080p
          - WEBDL-1080p
      - name: WEB 720p
        enabled: false
        qualities:
          - WEBRip-720p
          - WEBDL-720p
      - name: Bluray-720p
        enabled: false
      - name: Bluray-2160p Remux
        enabled: false

  - name: HD Only
    reset_unmatched_scores:
      enabled: true
    upgrade:
      allowed: true
      until_quality: Web 1080p
    min_format_score: 0
    score_set: default
    qualities:
      - name: Bluray-2160p Remux
        enabled: false
      - name: Bluray-2160p
        enabled: false
      - name: Web 2160p
        enabled: false
        qualities:
          - WEBRip-2160p
          - WEBDL-2160p
      - name: Bluray-1080p Remux
        enabled: true
      - name: Bluray-1080p
        enabled: true
      - name: Web 1080p
        enabled: true
        qualities:
          - WEBRip-1080p
          - WEBDL-1080p
      - name: Bluray-720p
        enabled: false
      - name: WEB 720p
        enabled: false
        qualities:
          - WEBRip-720p
          - WEBDL-720p
      - name: Bluray-480p
        enabled: false
      - name: WEB 480p
        enabled: false
        qualities:
          - WEBRip-480p
          - WEBDL-480p
      - name: DVD
        enabled: false
      - name: SDTV
        enabled: false

custom_formats:
# PREFERRED AUDIO FORMATS FOR SONOS ARC + APPLE TV 4K (SONARR)
  - trash_ids:
      - 4232a509ce60c4e208d13825b7c06264 # DD+ ATMOS
    assign_scores_to:
      - name: AppleTV-Optimized
        score: 8000
      - name: HD Only
        score: 8000

  - trash_ids:
      - 63487786a8b01b7f20dd2bc90dd4a477 # DD+
    assign_scores_to:
      - name: AppleTV-Optimized
        score: 6000
      - name: HD Only
        score: 6000

  - trash_ids:
      - dbe00161b08a25ac6154c55f95e6318d # DD
    assign_scores_to:
      - name: AppleTV-Optimized
        score: 4000
      - name: HD Only
        score: 4000

  - trash_ids:
      - b6fbafa7942952a13e17e2b1152b539a # ATMOS (undefined)
    assign_scores_to:
      - name: AppleTV-Optimized
        score: -5000  # Block ambiguous ATMOS
      - name: HD Only
        score: -5000  # Block ambiguous ATMOS

# INCOMPATIBLE AUDIO FORMATS - BLOCK THESE FOR SONOS/APPLE TV
  - trash_ids:
      - 28f6ef16d61e2d1adfce3156ed8257e3 # OPUS (Sonarr)
    assign_scores_to:
      - name: AppleTV-Optimized
        score: -10000  # BLOCK completely
      - name: HD Only
        score: -10000  # BLOCK completely

  - trash_ids:
      - 0d7824bb924701997f874e7ff7d4844a # TrueHD ATMOS
    assign_scores_to:
      - name: AppleTV-Optimized
        score: -10000  # BLOCK completely
      - name: HD Only
        score: -10000  # BLOCK completely

  - trash_ids:
      - 1808e4b9cee74e064dfae3f1db99dbfe # TrueHD
    assign_scores_to:
      - name: AppleTV-Optimized
        score: -8000   # BLOCK completely
      - name: HD Only
        score: -8000   # BLOCK completely

  - trash_ids:
      - 9d00418ba386a083fbf4d58235fc37ef # DTS X
    assign_scores_to:
      - name: AppleTV-Optimized
        score: -10000  # BLOCK completely
      - name: HD Only
        score: -10000  # BLOCK completely

  - trash_ids:
      - c429417a57ea8c41d57e6990a8b0033f # DTS-HD MA
    assign_scores_to:
      - name: AppleTV-Optimized
        score: -8000   # BLOCK completely
      - name: HD Only
        score: -8000   # BLOCK completely

  - trash_ids:
      - cfa5fbd8f02a86fc55d8d223d06a5e1f # DTS-HD HRA
    assign_scores_to:
      - name: AppleTV-Optimized
        score: -8000   # BLOCK completely
      - name: HD Only
        score: -8000   # BLOCK completely

  - trash_ids:
      - c1a25cd67b5d2e08287c957b1eb903ec # DTS-ES
    assign_scores_to:
      - name: AppleTV-Optimized
        score: -8000   # BLOCK completely
      - name: HD Only
        score: -8000   # BLOCK completely

  - trash_ids:
      - 5964f2a8b3be407d083498e4459d05d0 # DTS
    assign_scores_to:
      - name: AppleTV-Optimized
        score: -8000   # BLOCK completely
      - name: HD Only
        score: -8000   # BLOCK completely

  # HDR FORMATS (Sonarr IDs)
  - trash_ids:
      - 7c3a61a9c6cb04f52f1544be6d44a026 # DV Boost (current)
    assign_scores_to:
      - name: AppleTV-Optimized
        score: 2500  # Highest video priority
      - name: HD Only
        score: 1500

  - trash_ids:
      - 0c4b99df9206d2cfac3c05ab897dd62a # HDR10+ Boost (current)
    assign_scores_to:
      - name: AppleTV-Optimized
        score: 2200  # Very high priority
      - name: HD Only
        score: 1200

  # RESOLUTION PREFERENCES
  - trash_ids:
      - 1bef6c151fa35093015b0bfef18279e5 # 2160p
    assign_scores_to:
      - name: AppleTV-Optimized
        score: 5000  # HEAVILY prefer 4K - much higher than before

  - trash_ids:
      - 290078c8b266272a5cc8e251b5e2eb0b # 1080p  
    assign_scores_to:
      - name: HD Only
        score: 1500  # Only score 1080p for HD Only profile
